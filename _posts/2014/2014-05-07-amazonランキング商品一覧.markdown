---
layout: post
title: "amazonランキング商品一覧"
published: true
date: 2014-05-07 13:28
comments: true
tags: 
categories: 
---


amazon api叩いて本のランキング400位までを表示するサイト作った。

http://amazon-rank-book.herokuapp.com


amazon api叩いて遊んでいたんだけど、すっごい昔にもphpで叩いてた時があってそのときのコードだったりドキュメントの読み間違いとか同じところ引っかかってたなそういえばとあとから思っていたりした。
資産として残しておくことが出来ていなかった。

ということで何か資産として残しておけるように簡単なwebサービス作ろうと作った奴。

kindle版書籍は除外してamazonの本ランキングを保存して1日に1回クロールして保存しなおしている。ちなみにjson形式でレスポンスを返してくれるようにもしている。

通常のAmazonランキングは100位以降は見れないので400位まで見れるようにしている。

本当は10000位(herokuのdb上限)まで保存してやろうと思ったんだけどamazon apiが通常は100位までしか取得出来なくて小細工して今まで取得したアイテム群を除外してapi叩くようにしたんだけど、get形式で取得するapiなもんだからapi叩くurlがむっちゃ長過ぎてapiたたき切れなくなってたのでとりあえずの区切りで400位まで取得が出来るようにした。

こういうカジュアルハックを乱発していくのもいいやねぇ
